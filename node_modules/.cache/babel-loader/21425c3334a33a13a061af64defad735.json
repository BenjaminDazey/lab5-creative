{"remainingRequest":"C:\\Users\\Benji\\projects\\lab5-create\\node_modules\\babel-loader\\lib\\index.js!C:\\Users\\Benji\\projects\\lab5-create\\node_modules\\cache-loader\\dist\\cjs.js??ref--0-0!C:\\Users\\Benji\\projects\\lab5-create\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!C:\\Users\\Benji\\projects\\lab5-create\\src\\components\\Uploader.vue?vue&type=script&lang=js&","dependencies":[{"path":"C:\\Users\\Benji\\projects\\lab5-create\\src\\components\\Uploader.vue","mtime":1555559393375},{"path":"C:\\Users\\Benji\\projects\\lab5-create\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Benji\\projects\\lab5-create\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"C:\\Users\\Benji\\projects\\lab5-create\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"C:\\Users\\Benji\\projects\\lab5-create\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["import \"core-js/modules/es6.function.name\";\nimport \"regenerator-runtime/runtime\";\nimport _asyncToGenerator from \"C:\\\\Users\\\\Benji\\\\projects\\\\lab5-create\\\\node_modules\\\\@babel\\\\runtime-corejs2/helpers/esm/asyncToGenerator\";\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\nexport default {\n  name: 'Uploader',\n  props: {\n    show: Boolean\n  },\n  data: function data() {\n    return {\n      title: '',\n      file: null,\n      error: ''\n    };\n  },\n  created: function () {\n    var _created = _asyncToGenerator(\n    /*#__PURE__*/\n    regeneratorRuntime.mark(function _callee() {\n      return regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              this.changeQuote();\n\n            case 1:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, this);\n    }));\n\n    function created() {\n      return _created.apply(this, arguments);\n    }\n\n    return created;\n  }(),\n  computed: {\n    description: function description() {\n      return this.$store.state.description;\n    }\n  },\n  methods: {\n    fileChanged: function fileChanged(event) {\n      this.file = event.target.files[0];\n    },\n    changeQuote: function () {\n      var _changeQuote = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee2() {\n        return regeneratorRuntime.wrap(function _callee2$(_context2) {\n          while (1) {\n            switch (_context2.prev = _context2.next) {\n              case 0:\n                this.$store.dispatch(\"changeQuote\");\n\n              case 1:\n              case \"end\":\n                return _context2.stop();\n            }\n          }\n        }, _callee2, this);\n      }));\n\n      function changeQuote() {\n        return _changeQuote.apply(this, arguments);\n      }\n\n      return changeQuote;\n    }(),\n    close: function close() {\n      this.$emit('escape');\n      this.changeQuote();\n    },\n    upload: function () {\n      var _upload = _asyncToGenerator(\n      /*#__PURE__*/\n      regeneratorRuntime.mark(function _callee3() {\n        var formData;\n        return regeneratorRuntime.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _context3.prev = 0;\n                formData = new FormData();\n                formData.append('photo', this.file, this.file.name);\n                formData.append('title', this.title);\n                formData.append('description', this.description);\n                _context3.next = 7;\n                return this.$store.dispatch(\"upload\", formData);\n\n              case 7:\n                this.error = _context3.sent;\n\n                if (!this.error) {\n                  this.title = '';\n                  this.file = null;\n                  this.$emit('uploadFinished');\n                }\n\n                this.changeQuote();\n                _context3.next = 15;\n                break;\n\n              case 12:\n                _context3.prev = 12;\n                _context3.t0 = _context3[\"catch\"](0);\n                console.log(_context3.t0);\n\n              case 15:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3, this, [[0, 12]]);\n      }));\n\n      function upload() {\n        return _upload.apply(this, arguments);\n      }\n\n      return upload;\n    }()\n  }\n};",{"version":3,"sources":["Uploader.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA4BA,eAAA;AACA,EAAA,IAAA,EAAA,UADA;AAEA,EAAA,KAAA,EAAA;AACA,IAAA,IAAA,EAAA;AADA,GAFA;AAKA,EAAA,IALA,kBAKA;AACA,WAAA;AACA,MAAA,KAAA,EAAA,EADA;AAEA,MAAA,IAAA,EAAA,IAFA;AAGA,MAAA,KAAA,EAAA;AAHA,KAAA;AAKA,GAXA;AAYA,EAAA,OAZA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA,mBAAA,WAAA;;AAbA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAeA,EAAA,QAAA,EAAA;AACA,IAAA,WADA,yBACA;AACA,aAAA,KAAA,MAAA,CAAA,KAAA,CAAA,WAAA;AACA;AAHA,GAfA;AAoBA,EAAA,OAAA,EAAA;AACA,IAAA,WADA,uBACA,KADA,EACA;AACA,WAAA,IAAA,GAAA,KAAA,CAAA,MAAA,CAAA,KAAA,CAAA,CAAA,CAAA;AACA,KAHA;AAIA,IAAA,WAJA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAKA,qBAAA,MAAA,CAAA,QAAA,CAAA,aAAA;;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAOA,IAAA,KAPA,mBAOA;AACA,WAAA,KAAA,CAAA,QAAA;AACA,WAAA,WAAA;AACA,KAVA;AAWA,IAAA,MAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA,gBAAA,QAbA,GAaA,IAAA,QAAA,EAbA;AAcA,gBAAA,QAAA,CAAA,MAAA,CAAA,OAAA,EAAA,KAAA,IAAA,EAAA,KAAA,IAAA,CAAA,IAAA;AACA,gBAAA,QAAA,CAAA,MAAA,CAAA,OAAA,EAAA,KAAA,KAAA;AACA,gBAAA,QAAA,CAAA,MAAA,CAAA,aAAA,EAAA,KAAA,WAAA;AAhBA;AAAA,uBAiBA,KAAA,MAAA,CAAA,QAAA,CAAA,QAAA,EAAA,QAAA,CAjBA;;AAAA;AAiBA,qBAAA,KAjBA;;AAkBA,oBAAA,CAAA,KAAA,KAAA,EAAA;AACA,uBAAA,KAAA,GAAA,EAAA;AACA,uBAAA,IAAA,GAAA,IAAA;AACA,uBAAA,KAAA,CAAA,gBAAA;AACA;;AACA,qBAAA,WAAA;AAvBA;AAAA;;AAAA;AAAA;AAAA;AAyBA,gBAAA,OAAA,CAAA,GAAA;;AAzBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;;AAAA;AAAA;AAAA;AApBA,CAAA","sourcesContent":["<template>\r\n<transition v-if=\"show\" name=\"modal\">\r\n  <div class=\"modal-mask\">\r\n    <div class=\"modal-wrapper\">\r\n      <div class=\"modal-container\">\r\n        <div class=\"modal-header\">\r\n          <h1 class=\"modal-title\">Upload</h1>\r\n        </div>\r\n        <div class=\"modal-body\">\r\n          <p v-if=\"error\" class=\"error\">{{error}}</p>\r\n          <form @submit.prevent=\"upload\">\r\n            <input v-model=\"title\" placeholder=\"Person's name\">\r\n            <p></p>\r\n            <textarea v-model=\"description\" placeholder=\"Description\"></textarea>\r\n            <p></p>\r\n            <input type=\"file\" name=\"photo\" @change=\"fileChanged\">\r\n            <p></p>\r\n            <button type=\"button\" @click=\"close\" class=\"pure-button\">Close</button>\r\n            <button type=\"submit\" class=\"pure-button pure-button-secondary\">Upload</button>\r\n          </form>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  </div>\r\n</transition>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n  name: 'Uploader',\r\n  props: {\r\n    show: Boolean,\r\n  },\r\n  data() {\r\n    return {\r\n      title: '',\r\n      file: null,\r\n      error: '',\r\n    }\r\n  },\r\n  async created() {\r\n    this.changeQuote();\r\n  },\r\n  computed:{\r\n    description(){\r\n      return this.$store.state.description;\r\n    }\r\n  },\r\n  methods: {\r\n  fileChanged(event) {\r\n    this.file = event.target.files[0]\r\n  },\r\n  async changeQuote(){\r\n    this.$store.dispatch(\"changeQuote\");\r\n  },\r\n  close() {\r\n    this.$emit('escape');\r\n    this.changeQuote();\r\n  },\r\n     async upload() {\r\n      try {\r\n        const formData = new FormData();\r\n        formData.append('photo', this.file, this.file.name);\r\n        formData.append('title', this.title);\r\n        formData.append('description', this.description);\r\n        this.error = await this.$store.dispatch(\"upload\", formData);\r\n        if (!this.error) {\r\n          this.title = '';\r\n          this.file = null;\r\n          this.$emit('uploadFinished');\r\n        }\r\n        this.changeQuote();\r\n      } catch (error) {\r\n        console.log(error);\r\n      }\r\n     }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\ninput {\r\n  width: 100%;\r\n}\r\n\r\ntextarea {\r\n  width: 100%;\r\n  height: 100px\r\n}\r\n\r\n.pure-button-secondary {\r\n  float: right;\r\n}\r\n</style>"],"sourceRoot":"src/components"}]}